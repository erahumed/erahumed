% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rfcm--allocate.R
\name{allocate_surface}
\alias{allocate_surface}
\title{Allocate a Management System to a Surface Fraction}
\usage{
allocate_surface(
  map,
  system,
  target_fraction,
  ditches = 1:26,
  field_type = c("both", "regular", "tancat")
)
}
\arguments{
\item{map}{\code{[}\link[=cluster_map]{erahumed_cluster_map}\verb{]} \cr
A cluster map created with \code{\link[=new_cluster_map]{new_cluster_map()}} or \code{\link[=default_cluster_map]{default_cluster_map()}}.}

\item{system}{\code{[}\link[=management_system]{erahumed_management_system}\verb{]} \cr
A management system to assign, created with \code{\link[=new_management_system]{new_management_system()}} or
helper functions such as \code{\link[=bomba]{bomba()}} or \code{\link[=clearfield]{clearfield()}}.}

\item{target_fraction}{\verb{[numeric(1)]} \cr
The fraction of total surface area to allocate to the given system. Must
be a number between 0 and 1.}

\item{ditches}{\verb{[integer]} \cr
A vector of ditch IDs where candidate clusters will be selected from.
Defaults to all ditches (1:26).}

\item{field_type}{\verb{[character(1)]} \cr
Type of field to consider when selecting clusters. Must be one of:
\itemize{
\item \code{"regular"} – only regular fields
\item \code{"tancat"} – only tancats
\item \code{"both"} – all field types (default)
}}
}
\value{
An updated \code{erahumed_cluster_map} object with the new system
allocated to selected clusters.
}
\description{
Assigns a new management system to a fraction of surface area by selecting
clusters that match given spatial and structural criteria.
}
\details{
This function randomly selects clusters matching the specified \code{ditches} and
\code{field_type} until the cumulative surface area of selected clusters reaches
the \code{target_fraction}. The new management system is added to the internal
list and assigned a unique ID within the map.

If no eligible clusters remain before reaching the target fraction, the
function will return early with a partial allocation.
}
\examples{
map <- new_cluster_map(jsendra())
map <- allocate_surface(map, bomba(), target_fraction = 0.1, field_type = "tancat")

}
\seealso{
\code{\link[=new_cluster_map]{new_cluster_map()}}, \code{\link[=default_cluster_map]{default_cluster_map()}}, \code{\link[=new_management_system]{new_management_system()}}
}
