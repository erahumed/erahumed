---
output: github_document
editor_options: 
  markdown: 
    wrap: 72
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# erahumed

<!-- badges: start -->

[![Project Status: WIP – Initial development is in progress, but there
has not yet been a stable, usable release suitable for the
public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)
[![R-CMD-check](https://github.com/erahumed/erahumed/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/erahumed/erahumed/actions/workflows/R-CMD-check.yaml)
[![codecov](https://codecov.io/gh/erahumed/erahumed/graph/badge.svg?token=72POLBUEUR)](https://codecov.io/gh/erahumed/erahumed)
[![Website](https://img.shields.io/badge/Website-here-blue)](https://erahumed.github.io/erahumed/)

<!-- badges: end -->

The `{erahumed}` R package implements the computational engine of the
[ERAHUMED Decision Support
System](https://www.erahumed.com/decision-support-system/), a modelling
framework for assessing hydrology, pesticide fate, and ecological risk
in the Albufera Natural Park (València, Spain). It integrates models
that simulate water flows, contaminant transport, and biological effects
across the park’s interconnected water bodies.

With `{erahumed}`, users can:

-   **Configure simulations** – Define landscape, chemical, and
    management parameters, or use built-in presets for rapid setup.

-   **Run the model** – Execute hydrology, exposure, and risk assessment
    modules in a reproducible R workflow.

-   **Analyse outputs** – Retrieve results as tidy `data.frame`s, ready
    for statistical analysis or visualization.

-   **Explore interactively** – Launch a bundled Shiny application with
    predefined plots, maps, and tables for model inputs and results.

The package is designed for both research and practical decision-making,
enabling transparent scenario analysis and reproducible environmental
assessments.

Comprehensive resources are available to support users at different
levels:

-   The [package documentation](https://erahumed.github.io/erahumed)
    covers the R functions, datasets, and Shiny interface bundled with
    `{erahumed}`, serving as a practical reference for day-to-day use.

-   A [user manual](https://erahumed.github.io/erahumed-book)
    provides an in-depth description of the underlying models, algorithms, and
    assumptions. It is intended for researchers who wish to understand and/or extend
    the modelling framework.

Further background on the ERAHUMED project can be found on the [main project website](https://www.erahumed.com/).

## Installation

You can install the latest release of `{erahumed}` from Github, by
running the following command in R:

```{r eval=FALSE, include=TRUE}
install.packages("remotes")  # If necessary
remotes::install_github("erahumed/erahumed")  # development version
```

In order to install a specific version of `{erahumed}`, you can use:

```{r eval=FALSE, include=TRUE}
remotes::install_github("erahumed/erahumed", ref = "v0.21.1")
```

where you should replace `"v0.21.1"` with the actual version you need.

## Usage

### Example 1: Using the interactive dashboard

The graphical interface to the ERAHUMED DSS can be accessed through the
following R command:

```{r eval=FALSE, include=TRUE}
erahumed::launch_dss()
```

This will open the DSS dashboard in your default browser, from where you
can explore simulation outputs in a user friendly manner.

### Example 2: command line interface to simulations

```{r}
library(erahumed)
```

The following example illustrates the workflow for manually running the
ERAHUMED simulation chain, and extracting the outputs of the various
simulation layers. For more detailed information, see the [main package
vignette](https://erahumed.github.io/erahumed/articles/erahumed-workflow.html).

Simulations are run via:

```{r}
simulation <- erahumed_simulation()
```

where simulation inputs can be customized through the arguments of
`erahumed_simulation()`. Results can be inspected through:

```{r}
get_results(simulation, 
            component = "exposure",  # either "hydrology", "exposure", or "risk"  
            element = "lake"         # either "lake", "ditch", or "cluster"
            ) |>
  head()
```

## Getting help

The full documentation of the `{erahumed}` R package is hosted at
[erahumed.github.io/erahumed](https://erahumed.github.io/erahumed/).

If you have issues running `{erahumed}` or want to suggest an
improvement, please [file an issue on Github](https://github.com/erahumed/erahumed/issues).
