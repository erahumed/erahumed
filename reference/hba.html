<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hydrological Balance of the Albufera lake — hba • erahumed</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Hydrological Balance of the Albufera lake — hba"><meta name="description" content="This layer computes the hydrological balance of the Albufera lake, complementing the input information on lake outflows and levels with an estimate of the total inflow from irrigation ditches."><meta property="og:description" content="This layer computes the hydrological balance of the Albufera lake, complementing the input information on lake outflows and levels with an estimate of the total inflow from irrigation ditches."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">erahumed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.14.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ct-diagram.html">Diagram of physical processes for chemical transport</a></li>
    <li><a class="dropdown-item" href="../articles/erahumed-workflow.html">Simulation workflow</a></li>
    <li><a class="dropdown-item" href="../articles/hydrology-scheme.html">Hydrological model of the Albufera Natural Park</a></li>
    <li><a class="dropdown-item" href="../articles/pipeline-scheme.html">Scheme of the simulation pipeline</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/erahumed/erahumed/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Hydrological Balance of the Albufera lake</h1>
      <small class="dont-index">Source: <a href="https://github.com/erahumed/erahumed/blob/master/R/hba--main.R" class="external-link"><code>R/hba--main.R</code></a></small>
      <div class="d-none name"><code>hba.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This layer computes the hydrological balance of the Albufera lake, complementing the input information on lake outflows and levels with an estimate of the total inflow from irrigation ditches.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">setup_hba</span><span class="op">(</span></span>
<span>  <span class="va">simulation</span>,</span>
<span>  storage_curve <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">level</span><span class="op">)</span> <span class="fl">16.7459</span> <span class="op">*</span> <span class="fl">1e+06</span> <span class="op">+</span> <span class="va">level</span> <span class="op">*</span> <span class="fl">23.6577</span> <span class="op">*</span> <span class="fl">1e+06</span>,</span>
<span>  petp_function <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">p</span>, <span class="va">etp</span><span class="op">)</span> <span class="fl">114.226</span> <span class="op">*</span> <span class="fl">1000</span> <span class="op">*</span> <span class="va">p</span> <span class="op">-</span> <span class="fl">79.361</span> <span class="op">*</span> <span class="fl">1000</span> <span class="op">*</span> <span class="va">etp</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-simulation">simulation<a class="anchor" aria-label="anchor" href="#arg-simulation"></a></dt>
<dd><p><code>[</code><a href="erahumed_simulation.html">erahumed_simulation</a><code>]</code> <br>
The simulation object being modified.</p></dd>


<dt id="arg-storage-curve">storage_curve<a class="anchor" aria-label="anchor" href="#arg-storage-curve"></a></dt>
<dd><p><code>[function]</code> <br> A function that converts lake levels into lake <em>volumes</em>. The function should take a single numeric vector as input, and should return a numeric vector of the same length as output. The numeric values for the default (linear) storage curve are taken from the CHJ report <a href="https://www.chj.es/Descargas/ProyectosOPH/Consulta%20publica/PHC-2015-2021/ReferenciasBibliograficas/HumedalesZonasProtegidas/CHJ,2012.Aquatool_Albufera.pdf" class="external-link"><em>Modelo de seguimiento de l’Albufera de Valencia con AQUATOOLDMA</em></a>.</p></dd>


<dt id="arg-petp-function">petp_function<a class="anchor" aria-label="anchor" href="#arg-petp-function"></a></dt>
<dd><p><code>[function]</code> <br> A function that converts values of precipitation and evapotranspiration per unit area (assumed to be expressed in millimiters) into volume changes for the Albufera lake (in cube meters when the inputs are given in the expected units). This function should take two numeric vectors of common length as inputs (representing the precipitation and evapotranspiration time series, respectively), and should return a numeric vector of the same length. The numeric values used in the default (linear) function were computed by the package authors, and correspond to the total study area (consisting of the lake and irrigation ditches) and the flooded fraction, that are relevant for precipitation and evapotranspiration volume changes, respectively.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An objects of class <a href="erahumed_simulation.html">erahumed_simulation</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The output data.frame of the calculated HBA layer contains a copy of the
input data, as well as the following additional columns:</p><ul><li><p><code>volume</code> Volume time series, obtained from the storage curve.</p></li>
<li><p><code>volume_change</code> Differenced time series of volume. The \(n\)-th is given
by \(\Delta V _n \equiv V_{n+1}-V_n\), where \(V_n\) is volume at time
step \(n\).</p></li>
<li><p><code>petp_change</code> Time series. The amount \(\Delta V _n ^\text{P-ETP}\) of
volume change due to precipitation and evapotranspiration, obtained from the
P-ETP surface.</p></li>
<li><p><code>outflow_total</code> Time series of total outflows, measured in cube meters per
second. This is the sum
\(\sum _i O_i\) of time series passed through the <code>outflows</code> argument,
plus an extra term \(O_R\) that estimates the outflow due to water
recirculation (see TODO #60).</p></li>
<li><p><code>outflow_recirculation</code> Time series. Estimate of outflow due to water
recirculation.</p></li>
<li><p><code>inflow_total</code> Time serie of total inflows, in cube meters per second.
This is computed as \(I = \sum _{i} O_i + \delta O + \frac{\Delta V _n - \Delta V _n ^\text{P-ETP}}{24 \times 60 \times 60}\).</p></li>
<li><p><code>residence_time_days</code>. Residence time, as simulationed by <a href="hba_residence_time.html">hba_residence_time</a>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other simulation layers:
<code><a href="ca.html">ca</a></code>,
<code><a href="ct.html">ct</a></code>,
<code><a href="hbd.html">hbd</a></code>,
<code><a href="hbp.html">hbp</a></code>,
<code><a href="inp.html">inp</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valerio Gherardi, Pablo Amador.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

