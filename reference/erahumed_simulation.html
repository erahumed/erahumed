<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Initialize an ERAHUMED simulation — erahumed_simulation • erahumed</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Initialize an ERAHUMED simulation — erahumed_simulation"><meta name="description" content="Initializes an ERAHUMED simulation.
See the main package vignette
for a practical, step-by-step overview of the simulation workflow.
For a detailed explanation of the underlying models, algorithms, and
assumptions, refer to the
user manual."><meta property="og:description" content="Initializes an ERAHUMED simulation.
See the main package vignette
for a practical, step-by-step overview of the simulation workflow.
For a detailed explanation of the underlying models, algorithms, and
assumptions, refer to the
user manual."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">erahumed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.21.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/erahumed-workflow.html">Simulation workflow</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/erahumed/erahumed/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Initialize an ERAHUMED simulation</h1>
      <small class="dont-index">Source: <a href="https://github.com/erahumed/erahumed/blob/master/R/meta--simulation.R" class="external-link"><code>R/meta--simulation.R</code></a></small>
      <div class="d-none name"><code>erahumed_simulation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Initializes an ERAHUMED simulation.
See the <a href="https://erahumed.github.io/erahumed/articles/erahumed-workflow.html">main package vignette</a>
for a practical, step-by-step overview of the simulation workflow.
For a detailed explanation of the underlying models, algorithms, and
assumptions, refer to the
<a href="https://erahumed.github.io/erahumed-book/">user manual</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">erahumed_simulation</span><span class="op">(</span></span>
<span>  date_start <span class="op">=</span> <span class="st">"2020-01-01"</span>,</span>
<span>  date_end <span class="op">=</span> <span class="st">"2020-12-31"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">840</span>,</span>
<span>  outflows_df <span class="op">=</span> <span class="fu">erahumed</span><span class="fu">::</span><span class="va"><a href="albufera_outflows.html">albufera_outflows</a></span>,</span>
<span>  storage_curve_slope_m2 <span class="op">=</span> <span class="fl">23.66</span> <span class="op">*</span> <span class="fl">1e+06</span>,</span>
<span>  storage_curve_intercept_m3 <span class="op">=</span> <span class="fl">16.75</span> <span class="op">*</span> <span class="fl">1e+06</span>,</span>
<span>  petp_surface_m2 <span class="op">=</span> <span class="fl">53.9</span> <span class="op">*</span> <span class="fl">1e+06</span>,</span>
<span>  weather_df <span class="op">=</span> <span class="fu">erahumed</span><span class="fu">::</span><span class="va"><a href="albufera_weather.html">albufera_weather</a></span>,</span>
<span>  ideal_flow_rate_cm <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  height_thresh_cm <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  ditch_level_m <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  covmax <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  jgrow <span class="op">=</span> <span class="fl">152</span>,</span>
<span>  dact_m <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  css_ppm <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  foc_ss <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  foc_sed <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  bd_g_cm3 <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  qseep_m_day <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  porosity <span class="op">=</span> <span class="fl">0.11</span>,</span>
<span>  rfms_map <span class="op">=</span> <span class="fu"><a href="rfms_map.html">default_rfms_map</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="va">seed</span><span class="op">)</span>,</span>
<span>  .progress <span class="op">=</span> <span class="va">message</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-date-start">date_start<a class="anchor" aria-label="anchor" href="#arg-date-start"></a></dt>
<dd><p><code>[Date(1)]</code> <br> A single-value <code>Date</code> vector (or a convertible object). Defines the starting date of the date interval for the simulation.</p></dd>


<dt id="arg-date-end">date_end<a class="anchor" aria-label="anchor" href="#arg-date-end"></a></dt>
<dd><p><code>[Date(1)]</code> <br> A single-value <code>Date</code> vector (or a convertible object). Defines the ending date of the date interval for the simulation.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Seed for random number generation used by the simulation algorithms.</p></dd>


<dt id="arg-outflows-df">outflows_df<a class="anchor" aria-label="anchor" href="#arg-outflows-df"></a></dt>
<dd><p><code>[data.frame]</code> <br> Time-series dataset that provides the observational hydrological data on the Albufera lake, along the template of <a href="albufera_outflows.html">albufera_outflows</a> (the default value).</p></dd>


<dt id="arg-storage-curve-slope-m-">storage_curve_slope_m2<a class="anchor" aria-label="anchor" href="#arg-storage-curve-slope-m-"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Slope of the (linear) storage curve of the Albufera Lake, in square meters. Multiplying this value by the change in the lake's water level gives the corresponding change in water <em>volume</em>. The default numeric values are derived from the CHJ report <a href="https://www.chj.es/Descargas/ProyectosOPH/Consulta%20publica/PHC-2015-2021/ReferenciasBibliograficas/HumedalesZonasProtegidas/CHJ,2012.Aquatool_Albufera.pdf" class="external-link"><em>Modelo de seguimiento de l’Albufera de Valencia con AQUATOOLDMA</em></a>.</p></dd>


<dt id="arg-storage-curve-intercept-m-">storage_curve_intercept_m3<a class="anchor" aria-label="anchor" href="#arg-storage-curve-intercept-m-"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Intercept of the linear storage curve for the Albufera Lake, expressed in cubic meters. This value represents the lake's water volume when the water level is at sea level. The default numeric values are derived from the CHJ report <a href="https://www.chj.es/Descargas/ProyectosOPH/Consulta%20publica/PHC-2015-2021/ReferenciasBibliograficas/HumedalesZonasProtegidas/CHJ,2012.Aquatool_Albufera.pdf" class="external-link"><em>Modelo de seguimiento de l’Albufera de Valencia con AQUATOOLDMA</em></a>.</p></dd>


<dt id="arg-petp-surface-m-">petp_surface_m2<a class="anchor" aria-label="anchor" href="#arg-petp-surface-m-"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> The surface area (in square meters) used to convert precipitation and evapotranspiration per unit area into volume changes for the Albufera Lake. The default numeric value was computed by the package authors and corresponds to the average flooded surface of the Albufera lake and its irrigation ditches.</p></dd>


<dt id="arg-weather-df">weather_df<a class="anchor" aria-label="anchor" href="#arg-weather-df"></a></dt>
<dd><p><code>[data.frame]</code> <br> A dataset that provides the relevant metereological time series, along the template of <a href="albufera_weather.html">albufera_weather</a> (the default value).</p></dd>


<dt id="arg-ideal-flow-rate-cm">ideal_flow_rate_cm<a class="anchor" aria-label="anchor" href="#arg-ideal-flow-rate-cm"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Ideal inflow/outflow of a cluster, for days in which the cluster is scheduled to be in flux (<em>i.e.</em> when being simultaneously irrigated and drained). Expressed in centimeters of water depth per day.</p></dd>


<dt id="arg-height-thresh-cm">height_thresh_cm<a class="anchor" aria-label="anchor" href="#arg-height-thresh-cm"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A positive number. Height threshold for water levels, below which a cluster is considered to be emptied.</p></dd>


<dt id="arg-ditch-level-m">ditch_level_m<a class="anchor" aria-label="anchor" href="#arg-ditch-level-m"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> Constant water depth in ditches.</p></dd>


<dt id="arg-covmax">covmax<a class="anchor" aria-label="anchor" href="#arg-covmax"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A number between <code>0</code> and <code>1</code>. Maximum potential fraction of applied chemicals intercepted by foliage at crop maturation.</p></dd>


<dt id="arg-jgrow">jgrow<a class="anchor" aria-label="anchor" href="#arg-jgrow"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A positive integer. Length (in days) of crop maturation cycle in rice paddies.</p></dd>


<dt id="arg-dact-m">dact_m<a class="anchor" aria-label="anchor" href="#arg-dact-m"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A positive number. Active sediment layer depth, where "active"" refers to the portion of the sediment that is actually involved in chemical exchange or transport processes. Expressed in meters.</p></dd>


<dt id="arg-css-ppm">css_ppm<a class="anchor" aria-label="anchor" href="#arg-css-ppm"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A positive number. Concentration of water suspended solids, expressed in parts per million.</p></dd>


<dt id="arg-foc-ss">foc_ss<a class="anchor" aria-label="anchor" href="#arg-foc-ss"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A number between <code>0</code> and <code>1</code>. Fraction of organic matter content within suspended solids.</p></dd>


<dt id="arg-foc-sed">foc_sed<a class="anchor" aria-label="anchor" href="#arg-foc-sed"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A number between <code>0</code> and <code>1</code>. Fraction of organic matter content within sediment.</p></dd>


<dt id="arg-bd-g-cm-">bd_g_cm3<a class="anchor" aria-label="anchor" href="#arg-bd-g-cm-"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A positive number. Bulk density of the sediment (including both the solid material and the pore spaces). Expressed in grams per cubic centimeter.</p></dd>


<dt id="arg-qseep-m-day">qseep_m_day<a class="anchor" aria-label="anchor" href="#arg-qseep-m-day"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A positive number. Seepage rate, <em>i.e.</em> the rate at which water seeps through the sediment or soil. Expressed in meters per day.</p></dd>


<dt id="arg-porosity">porosity<a class="anchor" aria-label="anchor" href="#arg-porosity"></a></dt>
<dd><p><code>[numeric(1)]</code> <br> A number between <code>0</code> and <code>1</code>. The fraction of the total sediment volume that is occupied by pore spaces.</p></dd>


<dt id="arg-rfms-map">rfms_map<a class="anchor" aria-label="anchor" href="#arg-rfms-map"></a></dt>
<dd><p><code>[erahumed_rfms_map]</code> <br> An object of class <a href="rfms_map.html">rfms_map</a> that defines how different rice field management systems (RFMSs) are assigned to spatial clusters within the simulation. This object also encapsulates the full set of user-defined agrochemical configurations, including custom chemicals and RFMSs, and serves as the main interface for scenario customization. See <a href="rfms.html">rfms</a> for an overview of RFMS definitions and customization options.</p></dd>


<dt id="arg--progress">.progress<a class="anchor" aria-label="anchor" href="#arg--progress"></a></dt>
<dd><p>A function used to report simulation progress.
It should accept a single character string as input, representing the
current stage of the simulation (e.g., <code>"Computing hydrology: lake"</code>).
This parameter is primarily intended for user feedback mechanisms (e.g.,
console messages). By default, it prints a message to the R console.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>erahumed_simulation</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>rfms_map</code> argument plays a central role in the customization
capabilities of the ERAHUMED model. Beyond mapping rice field management
systems (RFMSs) to spatial clusters, it also carries the full definitions of
custom chemicals and RFMSs configured by the user. This makes it the primary
interface for building and running alternative scenarios involving changes in
pesticide use or management strategies.
For a detailed explanation of RFMS concepts, structure, and configuration,
see the <a href="https://erahumed.github.io/erahumed-book/chapters/rfms.html">RFMS section of the user manual</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">erahumed_simulation</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Initializing inputs</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing hydrology: lake</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing hydrology: clusters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing hydrology: ditches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing exposure: clusters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing exposure: ditches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing exposure: lake</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing risk: clusters</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing risk: ditches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Computing risk: lake</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ERAHUMED Simulation&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Date range             : 2020-01-01 to 2020-12-31 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Simulation days        : 366 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Clusters               : 552 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Management systems     : 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Chemicals simulated    : 8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Total applications     : 17 </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Need help extracting simulation outputs? Check `?get_results`.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valerio Gherardi, Pablo Amador.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

